<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browserbaseè‡ªåŠ¨åŒ–å·¥å…·æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        
        .section h2 {
            color: #555;
            margin-top: 0;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        textarea {
            height: 200px;
            font-family: 'Courier New', monospace;
        }
        
        button {
            background-color: #007bff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        .result.success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .result.error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .example-buttons {
            margin-bottom: 15px;
        }
        
        .example-buttons button {
            background-color: #28a745;
            margin-right: 5px;
        }
        
        .example-buttons button:hover {
            background-color: #218838;
        }
        
        .api-info {
            background-color: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .loading {
            display: none;
            color: #007bff;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Browserbaseæµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·æ¼”ç¤º</h1>
        
        <div class="api-info">
            <strong>APIæœåŠ¡åœ°å€:</strong> http://localhost:8000<br>
            <strong>APIæ–‡æ¡£:</strong> <a href="http://localhost:8000/docs" target="_blank">http://localhost:8000/docs</a><br>
            <strong>çŠ¶æ€:</strong> <span id="api-status">æ£€æŸ¥ä¸­...</span>
        </div>
        
        <div class="section">
            <h2>ğŸ“‹ è·å–å¯ç”¨æ“ä½œç±»å‹</h2>
            <button onclick="getActions()">è·å–æ“ä½œç±»å‹</button>
            <div class="loading" id="actions-loading">æ­£åœ¨è·å–...</div>
            <div id="actions-result" class="result" style="display: none;"></div>
        </div>
        
        <div class="section">
            <h2>âœ… é…ç½®éªŒè¯</h2>
            <div class="example-buttons">
                <button onclick="loadLoginExample()">åŠ è½½ç™»å½•ç¤ºä¾‹</button>
                <button onclick="loadContactExample()">åŠ è½½è”ç³»è¡¨å•ç¤ºä¾‹</button>
                <button onclick="loadCustomExample()">åŠ è½½è‡ªå®šä¹‰ç¤ºä¾‹</button>
            </div>
            
            <div class="form-group">
                <label for="config-json">è‡ªåŠ¨åŒ–é…ç½® (JSONæ ¼å¼):</label>
                <textarea id="config-json" placeholder="è¯·è¾“å…¥JSONæ ¼å¼çš„è‡ªåŠ¨åŒ–é…ç½®..."></textarea>
            </div>
            
            <button onclick="validateConfig()">éªŒè¯é…ç½®</button>
            <div class="loading" id="validate-loading">æ­£åœ¨éªŒè¯...</div>
            <div id="validate-result" class="result" style="display: none;"></div>
        </div>
        
        <div class="section">
            <h2>ğŸ” å¿«é€Ÿç™»å½•è¡¨å•æµ‹è¯•</h2>
            <div class="form-group">
                <label for="login-url">ç™»å½•é¡µé¢URL:</label>
                <input type="url" id="login-url" value="https://httpbin.org/forms/post" placeholder="https://example.com/login">
            </div>
            
            <div class="form-group">
                <label for="username">ç”¨æˆ·å:</label>
                <input type="text" id="username" value="testuser" placeholder="ç”¨æˆ·å">
            </div>
            
            <div class="form-group">
                <label for="password">å¯†ç :</label>
                <input type="password" id="password" value="testpass" placeholder="å¯†ç ">
            </div>
            
            <div class="form-group">
                <label for="api-key">Browserbase API Key:</label>
                <input type="text" id="api-key" placeholder="your_browserbase_api_key">
            </div>
            
            <div class="form-group">
                <label for="project-id">Browserbase Project ID:</label>
                <input type="text" id="project-id" placeholder="your_project_id">
            </div>
            
            <button onclick="testLogin()" id="login-btn">æµ‹è¯•ç™»å½• (éœ€è¦çœŸå®APIå¯†é’¥)</button>
            <div class="loading" id="login-loading">æ­£åœ¨æ‰§è¡Œè‡ªåŠ¨åŒ–...</div>
            <div id="login-result" class="result" style="display: none;"></div>
        </div>
        
        <div class="section">
            <h2>ğŸ“ è”ç³»è¡¨å•æµ‹è¯•</h2>
            <div class="form-group">
                <label for="contact-url">è¡¨å•é¡µé¢URL:</label>
                <input type="url" id="contact-url" value="https://httpbin.org/forms/post" placeholder="https://example.com/contact">
            </div>
            
            <div class="form-group">
                <label for="contact-name">å§“å:</label>
                <input type="text" id="contact-name" value="å¼ ä¸‰" placeholder="å§“å">
            </div>
            
            <div class="form-group">
                <label for="contact-email">é‚®ç®±:</label>
                <input type="email" id="contact-email" value="zhangsan@example.com" placeholder="é‚®ç®±">
            </div>
            
            <div class="form-group">
                <label for="contact-phone">ç”µè¯:</label>
                <input type="tel" id="contact-phone" value="13800138000" placeholder="ç”µè¯">
            </div>
            
            <div class="form-group">
                <label for="contact-message">æ¶ˆæ¯:</label>
                <textarea id="contact-message" style="height: 80px;" placeholder="æ¶ˆæ¯å†…å®¹">è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯</textarea>
            </div>
            
            <button onclick="testContactForm()" id="contact-btn">æµ‹è¯•è”ç³»è¡¨å• (éœ€è¦çœŸå®APIå¯†é’¥)</button>
            <div class="loading" id="contact-loading">æ­£åœ¨æ‰§è¡Œè‡ªåŠ¨åŒ–...</div>
            <div id="contact-result" class="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        // æ£€æŸ¥APIçŠ¶æ€
        async function checkApiStatus() {
            try {
                const response = await fetch('http://localhost:8000/');
                if (response.ok) {
                    document.getElementById('api-status').textContent = 'âœ… æ­£å¸¸è¿è¡Œ';
                    document.getElementById('api-status').style.color = 'green';
                } else {
                    throw new Error('APIå“åº”å¼‚å¸¸');
                }
            } catch (error) {
                document.getElementById('api-status').textContent = 'âŒ è¿æ¥å¤±è´¥';
                document.getElementById('api-status').style.color = 'red';
            }
        }

        // è·å–å¯ç”¨æ“ä½œç±»å‹
        async function getActions() {
            const loading = document.getElementById('actions-loading');
            const result = document.getElementById('actions-result');
            
            loading.style.display = 'block';
            result.style.display = 'none';
            
            try {
                const response = await fetch('http://localhost:8000/browserbase/actions');
                const data = await response.json();
                
                result.textContent = JSON.stringify(data, null, 2);
                result.className = 'result success';
                result.style.display = 'block';
            } catch (error) {
                result.textContent = `é”™è¯¯: ${error.message}`;
                result.className = 'result error';
                result.style.display = 'block';
            } finally {
                loading.style.display = 'none';
            }
        }

        // éªŒè¯é…ç½®
        async function validateConfig() {
            const configJson = document.getElementById('config-json').value;
            const loading = document.getElementById('validate-loading');
            const result = document.getElementById('validate-result');
            
            if (!configJson.trim()) {
                alert('è¯·è¾“å…¥é…ç½®JSON');
                return;
            }
            
            loading.style.display = 'block';
            result.style.display = 'none';
            
            try {
                const config = JSON.parse(configJson);
                const response = await fetch('http://localhost:8000/browserbase/validate-config', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(config)
                });
                
                const data = await response.json();
                
                result.textContent = JSON.stringify(data, null, 2);
                result.className = data.valid ? 'result success' : 'result error';
                result.style.display = 'block';
            } catch (error) {
                result.textContent = `é”™è¯¯: ${error.message}`;
                result.className = 'result error';
                result.style.display = 'block';
            } finally {
                loading.style.display = 'none';
            }
        }

        // æµ‹è¯•ç™»å½•
        async function testLogin() {
            const apiKey = document.getElementById('api-key').value;
            const projectId = document.getElementById('project-id').value;
            
            if (!apiKey || !projectId) {
                alert('è¯·è¾“å…¥Browserbase APIå¯†é’¥å’Œé¡¹ç›®ID');
                return;
            }
            
            const loginData = {
                browserbase_config: {
                    api_key: apiKey,
                    project_id: projectId
                },
                url: document.getElementById('login-url').value,
                username: document.getElementById('username').value,
                password: document.getElementById('password').value
            };
            
            const loading = document.getElementById('login-loading');
            const result = document.getElementById('login-result');
            const btn = document.getElementById('login-btn');
            
            loading.style.display = 'block';
            result.style.display = 'none';
            btn.disabled = true;
            
            try {
                const response = await fetch('http://localhost:8000/browserbase/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(loginData)
                });
                
                const data = await response.json();
                
                result.textContent = JSON.stringify(data, null, 2);
                result.className = data.success ? 'result success' : 'result error';
                result.style.display = 'block';
            } catch (error) {
                result.textContent = `é”™è¯¯: ${error.message}`;
                result.className = 'result error';
                result.style.display = 'block';
            } finally {
                loading.style.display = 'none';
                btn.disabled = false;
            }
        }

        // æµ‹è¯•è”ç³»è¡¨å•
        async function testContactForm() {
            const apiKey = document.getElementById('api-key').value;
            const projectId = document.getElementById('project-id').value;
            
            if (!apiKey || !projectId) {
                alert('è¯·è¾“å…¥Browserbase APIå¯†é’¥å’Œé¡¹ç›®ID');
                return;
            }
            
            const contactData = {
                browserbase_config: {
                    api_key: apiKey,
                    project_id: projectId
                },
                url: document.getElementById('contact-url').value,
                form_data: {
                    name: document.getElementById('contact-name').value,
                    email: document.getElementById('contact-email').value,
                    phone: document.getElementById('contact-phone').value,
                    message: document.getElementById('contact-message').value
                }
            };
            
            const loading = document.getElementById('contact-loading');
            const result = document.getElementById('contact-result');
            const btn = document.getElementById('contact-btn');
            
            loading.style.display = 'block';
            result.style.display = 'none';
            btn.disabled = true;
            
            try {
                const response = await fetch('http://localhost:8000/browserbase/contact-form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(contactData)
                });
                
                const data = await response.json();
                
                result.textContent = JSON.stringify(data, null, 2);
                result.className = data.success ? 'result success' : 'result error';
                result.style.display = 'block';
            } catch (error) {
                result.textContent = `é”™è¯¯: ${error.message}`;
                result.className = 'result error';
                result.style.display = 'block';
            } finally {
                loading.style.display = 'none';
                btn.disabled = false;
            }
        }

        // åŠ è½½ç¤ºä¾‹é…ç½®
        function loadLoginExample() {
            const example = {
                "url": "https://httpbin.org/forms/post",
                "actions": [
                    {
                        "action_type": "fill_input",
                        "selector_type": "css",
                        "selector_value": "input[name='custname']",
                        "input_value": "æµ‹è¯•ç”¨æˆ·",
                        "description": "å¡«å†™å®¢æˆ·å§“å"
                    },
                    {
                        "action_type": "fill_input",
                        "selector_type": "css",
                        "selector_value": "input[name='custtel']",
                        "input_value": "13800138000",
                        "description": "å¡«å†™ç”µè¯"
                    },
                    {
                        "action_type": "click_button",
                        "selector_type": "css",
                        "selector_value": "input[type='submit']",
                        "description": "æäº¤è¡¨å•",
                        "wait_time": 2
                    }
                ]
            };
            
            document.getElementById('config-json').value = JSON.stringify(example, null, 2);
        }

        function loadContactExample() {
            const example = {
                "url": "https://httpbin.org/forms/post",
                "actions": [
                    {
                        "action_type": "fill_input",
                        "selector_type": "css",
                        "selector_value": "input[name='custname']",
                        "input_value": "å¼ ä¸‰",
                        "description": "å¡«å†™å§“å"
                    },
                    {
                        "action_type": "fill_input",
                        "selector_type": "css",
                        "selector_value": "input[name='custemail']",
                        "input_value": "zhangsan@example.com",
                        "description": "å¡«å†™é‚®ç®±"
                    },
                    {
                        "action_type": "select_option",
                        "selector_type": "css",
                        "selector_value": "select[name='size']",
                        "input_value": "medium",
                        "description": "é€‰æ‹©å°ºå¯¸"
                    },
                    {
                        "action_type": "screenshot",
                        "selector_type": "css",
                        "selector_value": "",
                        "input_value": "form_filled.png",
                        "description": "æˆªå›¾"
                    }
                ]
            };
            
            document.getElementById('config-json').value = JSON.stringify(example, null, 2);
        }

        function loadCustomExample() {
            const example = {
                "url": "https://example.com/custom-form",
                "actions": [
                    {
                        "action_type": "navigate",
                        "selector_type": "css",
                        "selector_value": "",
                        "input_value": "https://example.com/custom-form",
                        "description": "å¯¼èˆªåˆ°è¡¨å•é¡µé¢"
                    },
                    {
                        "action_type": "wait",
                        "selector_type": "css",
                        "selector_value": "",
                        "wait_time": 2,
                        "description": "ç­‰å¾…é¡µé¢åŠ è½½"
                    },
                    {
                        "action_type": "fill_input",
                        "selector_type": "id",
                        "selector_value": "username",
                        "input_value": "testuser",
                        "description": "å¡«å†™ç”¨æˆ·å"
                    },
                    {
                        "action_type": "hover",
                        "selector_type": "css",
                        "selector_value": ".dropdown-trigger",
                        "description": "æ‚¬åœæ˜¾ç¤ºèœå•"
                    },
                    {
                        "action_type": "click_button",
                        "selector_type": "xpath",
                        "selector_value": "//button[contains(text(), 'æäº¤')]",
                        "description": "ç‚¹å‡»æäº¤æŒ‰é’®"
                    }
                ],
                "screenshot_on_error": true,
                "headless": false
            };
            
            document.getElementById('config-json').value = JSON.stringify(example, null, 2);
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥APIçŠ¶æ€
        window.onload = function() {
            checkApiStatus();
        };
    </script>
</body>
</html>
