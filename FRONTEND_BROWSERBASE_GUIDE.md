# Browserbase 自动化工具前端使用指南

## 概述

这是一个基于 Next.js 构建的可视化界面，用于创建和管理 Browserbase 浏览器自动化任务。通过拖拽式操作设计器，用户可以轻松创建复杂的浏览器自动化流程。

## 功能特性

### 🎨 可视化工作流设计器
- 拖拽式操作编排
- 实时预览和编辑
- 支持操作重排序
- 直观的操作流程展示

### ⚡ 快速操作
- 预设常用操作模板
- 一键生成登录表单自动化
- 快速创建联系表单填写
- 搜索和页面导航操作

### 📋 丰富的模板库
- 登录表单模板
- 联系表单模板
- 搜索提取模板
- 文件上传模板
- 多页面导航模板

### 🔧 高级配置选项
- 多种选择器类型支持
- 自定义等待时间和重试次数
- 错误处理和截图配置
- 同步/异步执行模式

### 📊 实时执行监控
- 实时日志显示
- 任务状态跟踪
- 执行结果展示
- 错误诊断和调试

## 界面布局

### 1. 头部工具栏
- **快速操作**: 快速创建常用自动化任务
- **选择模板**: 从预设模板中选择
- **预览配置**: 查看完整的JSON配置
- **导入/导出**: 保存和加载配置文件
- **执行按钮**: 同步或异步执行任务

### 2. 左侧配置面板
- **Browserbase配置**: API Key 和 Project ID
- **基础配置**: 目标URL、超时设置等
- **操作类型选择器**: 添加不同类型的操作

### 3. 中间工作流设计器
- **操作列表**: 显示所有已添加的操作
- **拖拽排序**: 通过拖拽调整操作顺序
- **操作预览**: 显示操作详情和状态
- **执行日志**: 实时显示执行过程
- **结果展示**: 显示执行结果和错误信息

### 4. 右侧属性编辑器
- **操作属性**: 编辑选中操作的详细配置
- **选择器配置**: 设置元素选择器
- **高级选项**: 重试次数、超时时间等

## 使用步骤

### 1. 配置 Browserbase
1. 在左侧配置面板输入 Browserbase API Key
2. 输入项目 ID
3. 设置目标网址

### 2. 创建自动化流程

#### 方法一：使用快速操作
1. 点击头部工具栏的"快速操作"按钮
2. 选择需要的操作类型（登录、联系表单等）
3. 填写相关信息
4. 点击"创建操作"

#### 方法二：使用模板
1. 点击"选择模板"按钮
2. 从模板库中选择合适的模板
3. 根据需要修改模板配置

#### 方法三：手动创建
1. 从左侧操作类型选择器中选择操作
2. 在右侧属性编辑器中配置操作详情
3. 重复添加更多操作

### 3. 配置操作属性
1. 点击中间区域的操作卡片
2. 在右侧编辑器中设置：
   - 操作描述
   - 选择器类型和值
   - 输入值
   - 等待时间
   - 重试次数
   - 超时时间

### 4. 执行自动化任务
1. **同步执行**: 立即执行并等待结果
2. **异步执行**: 后台执行，可查看任务状态

### 5. 监控执行过程
- 查看实时日志
- 监控任务状态
- 分析执行结果
- 下载日志文件

## 支持的操作类型

### 表单操作
- **填写输入框** (`fill_input`): 在输入框中填写文本
- **点击按钮** (`click_button`): 点击页面上的按钮
- **选择选项** (`select_option`): 从下拉菜单中选择选项
- **上传文件** (`upload_file`): 上传文件到页面
- **提交表单** (`submit_form`): 提交整个表单

### 页面操作
- **页面导航** (`navigate`): 导航到指定URL
- **等待** (`wait`): 等待指定时间
- **滚动** (`scroll`): 滚动页面
- **悬停** (`hover`): 鼠标悬停在元素上
- **截图** (`screenshot`): 保存页面截图

## 选择器类型

- **ID选择器** (`id`): 通过元素ID选择
- **Name属性** (`name`): 通过name属性选择
- **Class选择器** (`class`): 通过CSS类选择
- **CSS选择器** (`css`): 使用CSS选择器语法
- **XPath选择器** (`xpath`): 使用XPath表达式
- **标签选择器** (`tag`): 通过HTML标签选择
- **链接文本** (`link_text`): 通过链接文本选择
- **部分链接文本** (`partial_link_text`): 通过部分链接文本选择

## 最佳实践

### 1. 选择器优先级
推荐使用稳定的选择器，优先级如下：
1. ID选择器（最稳定）
2. Name属性
3. CSS选择器
4. XPath选择器（最灵活但可能不稳定）

### 2. 等待时间设置
- 页面加载后等待 2-3 秒
- 表单提交后等待 3-5 秒
- 文件上传等待 5-10 秒
- 根据网络状况调整

### 3. 错误处理
- 启用"错误时截图"功能
- 设置合理的重试次数（通常 2-3 次）
- 设置适当的超时时间

### 4. 调试技巧
- 使用浏览器开发者工具确认选择器
- 先在小范围测试操作
- 查看执行日志定位问题
- 利用截图功能分析页面状态

## 配置文件格式

### 导出的配置文件结构
```json
{
  "browserbase_config": {
    "api_key": "your_api_key",
    "project_id": "your_project_id"
  },
  "automation_config": {
    "url": "https://example.com",
    "actions": [
      {
        "id": "action_1",
        "action_type": "fill_input",
        "selector_type": "css",
        "selector_value": "input[name='username']",
        "input_value": "your_username",
        "description": "填写用户名",
        "wait_time": 1,
        "retry_count": 3,
        "timeout": 10
      }
    ],
    "global_timeout": 60,
    "screenshot_on_error": true,
    "headless": true
  }
}
```

## 故障排除

### 常见问题

#### 1. 操作执行失败
- **检查选择器**: 确认选择器是否正确
- **增加等待时间**: 页面可能需要更多时间加载
- **检查网络**: 确认网络连接正常
- **查看错误截图**: 分析页面实际状态

#### 2. 元素未找到
- **使用浏览器开发者工具**: 验证选择器
- **尝试不同选择器类型**: CSS、XPath、ID等
- **检查页面是否完全加载**: 增加等待时间
- **确认元素是否在iframe中**: 可能需要特殊处理

#### 3. 表单提交失败
- **检查必填字段**: 确认所有必填字段已填写
- **验证表单验证规则**: 检查输入格式是否正确
- **增加提交等待时间**: 给服务器更多处理时间
- **检查提交按钮选择器**: 确认按钮可点击

#### 4. 文件上传问题
- **确认文件路径**: 使用绝对路径
- **检查文件权限**: 确认文件可读
- **验证文件格式**: 确认网站支持该文件类型
- **增加上传等待时间**: 大文件需要更多时间

## 技术支持

如果遇到问题或需要帮助：

1. **查看执行日志**: 分析详细的错误信息
2. **导出配置**: 保存配置文件以便调试
3. **截图分析**: 利用错误截图分析问题
4. **联系支持**: 提供详细的错误信息和配置文件

## 更新日志

### v1.0.0
- 初始版本发布
- 基础的可视化工作流设计器
- 快速操作和模板功能
- 实时执行监控
- 同步/异步执行支持
